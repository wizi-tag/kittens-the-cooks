**`Virtual DOM`** (виртуальный DOM) — это концепция, используемая в React для повышения производительности обновления пользовательского интерфейса. Виртуальный DOM представляет собой абстракцию реального DOM (Document Object Model).

### Как работает Virtual DOM?

1. **`Создание Virtual DOM**:`
    
    Когда компонент React рендерится, он создает виртуальное представление DOM в виде JavaScript-объектов. Этот объект описывает структуру и состояние UI.
    
2. **`Сравнение Virtual DOM и реального DOM**:`
    
    При изменении состояния компонента или пропсов, React создает новое виртуальное представление DOM. Затем React сравнивает это новое виртуальное представление с предыдущим виртуальным DOM, используя алгоритм дифференциации (reconciliation algorithm).
    
3. **`Обновление реального DOM**:`
    
    После сравнения, React определяет, какие именно части реального DOM изменились, и обновляет только эти части, а не весь DOM. Это снижает количество операций по манипуляции с реальным DOM, что в свою очередь улучшает производительность и отзывчивость приложения.
    

### Более подробно о DOM-дереве

Базавая еденица DOM - node. Из них с помощью совокупности методов рендера собирается дерево реакт элементов, которое описывает все состояние приложения и хранится в памяти - это дерево называется `current tree`.

![image.png](React/React/Virtual%20DOM/image.png)

Далее это дерево попадает в среду рендеринга в вебе эта среда переведет дерево в набор dom-операций, необходимых для отрисовки текущих изменений. При всем этом оно приоритизирует  dom-операции по срочности их попадания к пользователю.

![image.png](React/React/Virtual%20DOM/image%201.png)

При первом рендере отрисовывается полностью dom-дерево. Например, если мы нажали кнопку на сайте. То у нас строится новое дерево. Называется оно `work-in-progress tree`.

![image.png](React/React/Virtual%20DOM/image%202.png)

Далее мы сравниваем `work-in-progress tree` с `current tree` и вычисляем разницу между ними. Далее эта разница попадает в рендеринг окружения (`rendering environment`), разница превращается в набор dom-операций с приоритетом выполнения. Далее компонент отрисовывается и `work-in-progress tree` становится `current tree`.